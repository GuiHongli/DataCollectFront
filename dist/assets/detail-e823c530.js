import{_ as T,p as F,u as V,r as U,o as A,a as l,i as E,b as u,c as b,d as c,e as s,w as e,l as w,n as N,j as g,f as d,t as r,k as j,F as I,m as G}from"./index-523b1615.js";import{s as z}from"./request-a0feafd1.js";const K={name:"TestCaseSetDetail",setup(){const S=F(),n=V(),y=U(!1),t=U(null),k=U([]),D=a=>{if(a===0)return"0 B";const o=1024,_=["B","KB","MB","GB"],f=Math.floor(Math.log(a)/Math.log(o));return parseFloat((a/Math.pow(o,f)).toFixed(2))+" "+_[f]},x=a=>a?new Date(a).toLocaleString("zh-CN"):"",p=a=>{if(!a)return"";try{const o=new URL(a);return`${o.hostname}:${o.port}${o.pathname}`}catch{return a}},C=async a=>{try{await navigator.clipboard.writeText(a),g.success("URL已复制到剪贴板")}catch{const _=document.createElement("textarea");_.value=a,document.body.appendChild(_),_.select(),document.execCommand("copy"),document.body.removeChild(_),g.success("URL已复制到剪贴板")}},i=async()=>{const a=S.params.id;if(!a){g.error("用例集ID不能为空");return}y.value=!0;try{const o=await z({url:`/test-case-set/${a}`,method:"get"});t.value=o.data}catch(o){console.error("加载用例集信息失败:",o),g.error("加载用例集信息失败")}finally{y.value=!1}},v=async()=>{const a=S.params.id;if(a)try{const o=await z({url:`/test-case-set/${a}/test-cases`,method:"get"});k.value=o.data}catch(o){console.error("加载测试用例失败:",o),g.error("加载测试用例失败")}},B=()=>{n.go(-1)};return A(()=>{i(),v()}),{loading:y,testCaseSet:t,testCases:k,formatFileSize:D,formatDateTime:x,getShortUrl:p,copyUrl:C,goBack:B}}},O={class:"test-case-set-detail-page"},q={class:"page-header"},H={class:"card-header"},J={class:"card-title"},P={key:0},Q={key:1,style:{color:"#909399"}},W={class:"test-steps"},X={class:"expected-result"};function Y(S,n,y,t,k,D){const x=l("ArrowLeft"),p=l("el-icon"),C=l("el-button"),i=l("el-descriptions-item"),v=l("el-tag"),B=l("Link"),a=l("el-link"),o=l("CopyDocument"),_=l("el-descriptions"),f=l("el-card"),h=l("el-table-column"),M=l("el-table"),R=E("loading");return u(),b("div",O,[c("div",q,[s(C,{onClick:t.goBack,type:"text",class:"back-button"},{default:e(()=>[s(p,null,{default:e(()=>[s(x)]),_:1}),n[1]||(n[1]=d(" 返回 ",-1))]),_:1,__:[1]},8,["onClick"]),n[2]||(n[2]=c("h2",{class:"page-title"},"用例集详情",-1))]),t.testCaseSet?(u(),w(f,{key:0,class:"test-case-set-info"},{header:e(()=>n[3]||(n[3]=[c("div",{class:"card-header"},[c("span",{class:"card-title"},"用例集信息")],-1)])),default:e(()=>[s(_,{column:2,border:""},{default:e(()=>[s(i,{label:"用例集名称"},{default:e(()=>[d(r(t.testCaseSet.name),1)]),_:1}),s(i,{label:"版本"},{default:e(()=>[d(r(t.testCaseSet.version),1)]),_:1}),s(i,{label:"描述"},{default:e(()=>[d(r(t.testCaseSet.description||"暂无描述"),1)]),_:1}),s(i,{label:"文件大小"},{default:e(()=>[d(r(t.formatFileSize(t.testCaseSet.fileSize)),1)]),_:1}),s(i,{label:"状态"},{default:e(()=>[s(v,{type:t.testCaseSet.status===1?"success":"danger"},{default:e(()=>[d(r(t.testCaseSet.status===1?"启用":"禁用"),1)]),_:1},8,["type"])]),_:1}),s(i,{label:"创建时间"},{default:e(()=>[d(r(t.formatDateTime(t.testCaseSet.createTime)),1)]),_:1}),t.testCaseSet.gohttpserverUrl?(u(),w(i,{key:0,label:"文件访问",span:2},{default:e(()=>[s(a,{type:"primary",href:t.testCaseSet.gohttpserverUrl,target:"_blank",underline:!1},{default:e(()=>[s(p,null,{default:e(()=>[s(B)]),_:1}),d(" "+r(t.getShortUrl(t.testCaseSet.gohttpserverUrl)),1)]),_:1},8,["href"]),s(C,{size:"small",type:"text",onClick:n[0]||(n[0]=m=>t.copyUrl(t.testCaseSet.gohttpserverUrl)),style:{"margin-left":"8px"}},{default:e(()=>[s(p,null,{default:e(()=>[s(o)]),_:1})]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1})):N("",!0),s(f,{class:"test-cases-list"},{header:e(()=>[c("div",H,[c("span",J,"测试用例列表 ("+r(t.testCases.length)+")",1)])]),default:e(()=>[j((u(),w(M,{data:t.testCases,style:{width:"100%"}},{default:e(()=>[s(h,{prop:"name",label:"用例名称","min-width":"150"}),s(h,{prop:"number",label:"用例编号",width:"100"}),s(h,{prop:"logicNetwork",label:"逻辑组网","min-width":"150"},{default:e(m=>[m.row.logicNetwork?(u(),b("div",P,[(u(!0),b(I,null,G(m.row.logicNetwork.split(";"),L=>(u(),w(v,{key:L,size:"small",style:{"margin-right":"4px","margin-bottom":"4px"}},{default:e(()=>[d(r(L),1)]),_:2},1024))),128))])):(u(),b("span",Q,"未配置"))]),_:1}),s(h,{prop:"testSteps",label:"测试步骤","min-width":"200"},{default:e(m=>[c("div",W,[c("pre",null,r(m.row.testSteps),1)])]),_:1}),s(h,{prop:"expectedResult",label:"预期结果","min-width":"200"},{default:e(m=>[c("div",X,[c("pre",null,r(m.row.expectedResult),1)])]),_:1})]),_:1},8,["data"])),[[R,t.loading]])]),_:1})])}const ee=T(K,[["render",Y],["__scopeId","data-v-af2ef911"]]);export{ee as default};
