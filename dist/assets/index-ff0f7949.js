import{s as w}from"./request-a0feafd1.js";import{_ as N,r as g,g as D,o as R,a as r,i as F,b as S,c as M,d as _,e as o,w as a,E as P,j as k,f as d,k as A,l as O,t as q}from"./index-523b1615.js";const I={name:"NetworkType",setup(){const b=g(!1),e=g([]),p=g(!1),t=g(""),f=g(),u=D({current:1,size:10,total:0}),i=D({id:null,name:"",description:"",status:1}),v={name:[{required:!0,message:"请输入网络类型名称",trigger:"blur"}]},s=async()=>{b.value=!0;try{const n={current:u.current,size:u.size},m=await w({url:"/network-type/page",method:"get",params:n});e.value=m.data.records,u.total=m.data.total}catch(n){console.error("加载数据失败:",n)}finally{b.value=!1}},V=()=>{t.value="新增网络类型",p.value=!0,y()},c=n=>{t.value="编辑网络类型",Object.assign(i,n),p.value=!0},z=async n=>{try{await P.confirm("确定要删除这个网络类型吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await w({url:`/network-type/${n.id}`,method:"delete"}),k.success("删除成功"),s()}catch(m){m!=="cancel"&&k.error("删除失败")}},x=async()=>{try{await f.value.validate(),i.id?(await w({url:`/network-type/${i.id}`,method:"put",data:i}),k.success("更新成功")):(await w({url:"/network-type",method:"post",data:i}),k.success("创建成功")),p.value=!1,s()}catch(n){console.error("提交失败:",n)}},y=()=>{Object.assign(i,{id:null,name:"",description:"",status:1}),f.value&&f.value.resetFields()},h=n=>{u.size=n,s()},C=n=>{u.current=n,s()};return R(()=>{s()}),{loading:b,tableData:e,pagination:u,dialogVisible:p,dialogTitle:t,formRef:f,form:i,rules:v,loadData:s,handleAdd:V,handleEdit:c,handleDelete:z,handleSubmit:x,resetForm:y,handleSizeChange:h,handleCurrentChange:C}}},G={class:"network-type-page"},H={class:"table-operations"},J={class:"pagination"},K={class:"dialog-footer"};function L(b,e,p,t,f,u){const i=r("Plus"),v=r("el-icon"),s=r("el-button"),V=r("Refresh"),c=r("el-table-column"),z=r("el-tag"),x=r("el-table"),y=r("el-pagination"),h=r("el-card"),C=r("el-input"),n=r("el-form-item"),m=r("el-radio"),B=r("el-radio-group"),T=r("el-form"),E=r("el-dialog"),U=F("loading");return S(),M("div",G,[e[15]||(e[15]=_("div",{class:"page-header"},[_("h2",{class:"page-title"},"网络类型管理"),_("p",{class:"page-description"},"管理网络类型：normal、弱网、拥塞、弱网+拥塞")],-1)),o(h,null,{default:a(()=>[_("div",H,[o(s,{type:"primary",onClick:t.handleAdd},{default:a(()=>[o(v,null,{default:a(()=>[o(i)]),_:1}),e[7]||(e[7]=d(" 新增网络类型 ",-1))]),_:1,__:[7]},8,["onClick"]),o(s,{onClick:t.loadData},{default:a(()=>[o(v,null,{default:a(()=>[o(V)]),_:1}),e[8]||(e[8]=d(" 刷新 ",-1))]),_:1,__:[8]},8,["onClick"])]),A((S(),O(x,{data:t.tableData,style:{width:"100%"}},{default:a(()=>[o(c,{prop:"name",label:"网络类型名称"}),o(c,{prop:"description",label:"描述"}),o(c,{prop:"status",label:"状态"},{default:a(l=>[o(z,{type:l.row.status===1?"success":"danger"},{default:a(()=>[d(q(l.row.status===1?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),o(c,{prop:"createTime",label:"创建时间"}),o(c,{label:"操作",width:"200"},{default:a(l=>[o(s,{size:"small",onClick:j=>t.handleEdit(l.row)},{default:a(()=>e[9]||(e[9]=[d("编辑",-1)])),_:2,__:[9]},1032,["onClick"]),o(s,{size:"small",type:"danger",onClick:j=>t.handleDelete(l.row)},{default:a(()=>e[10]||(e[10]=[d("删除",-1)])),_:2,__:[10]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[U,t.loading]]),_("div",J,[o(y,{"current-page":t.pagination.current,"onUpdate:currentPage":e[0]||(e[0]=l=>t.pagination.current=l),"page-size":t.pagination.size,"onUpdate:pageSize":e[1]||(e[1]=l=>t.pagination.size=l),"page-sizes":[10,20,50,100],total:t.pagination.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:t.handleSizeChange,onCurrentChange:t.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),o(E,{modelValue:t.dialogVisible,"onUpdate:modelValue":e[6]||(e[6]=l=>t.dialogVisible=l),title:t.dialogTitle,width:"500px",onClose:t.resetForm},{footer:a(()=>[_("span",K,[o(s,{onClick:e[5]||(e[5]=l=>t.dialogVisible=!1)},{default:a(()=>e[13]||(e[13]=[d("取消",-1)])),_:1,__:[13]}),o(s,{type:"primary",onClick:t.handleSubmit},{default:a(()=>e[14]||(e[14]=[d("确定",-1)])),_:1,__:[14]},8,["onClick"])])]),default:a(()=>[o(T,{ref:"formRef",model:t.form,rules:t.rules,"label-width":"120px"},{default:a(()=>[o(n,{label:"网络类型名称",prop:"name"},{default:a(()=>[o(C,{modelValue:t.form.name,"onUpdate:modelValue":e[2]||(e[2]=l=>t.form.name=l),placeholder:"请输入网络类型名称"},null,8,["modelValue"])]),_:1}),o(n,{label:"描述",prop:"description"},{default:a(()=>[o(C,{modelValue:t.form.description,"onUpdate:modelValue":e[3]||(e[3]=l=>t.form.description=l),type:"textarea",rows:3,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1}),o(n,{label:"状态",prop:"status"},{default:a(()=>[o(B,{modelValue:t.form.status,"onUpdate:modelValue":e[4]||(e[4]=l=>t.form.status=l)},{default:a(()=>[o(m,{label:1},{default:a(()=>e[11]||(e[11]=[d("启用",-1)])),_:1,__:[11]}),o(m,{label:0},{default:a(()=>e[12]||(e[12]=[d("禁用",-1)])),_:1,__:[12]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","onClose"])])}const X=N(I,[["render",L],["__scopeId","data-v-02fb7e6a"]]);export{X as default};
